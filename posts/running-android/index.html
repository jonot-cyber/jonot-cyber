<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Jonot's Blog</title><link rel=stylesheet href=/output.css></head><body class=bg-slate-100><header class="w-screen shadow-lg bg-white flex flex-col sm:flex-row text-2xl gap-4 p-2"><a class="font-bold mr-8" href=/><h1>Jonot's Blog</h1></a><a href=/posts>Posts</a>
<a href=/portfolio>Portfolio</a>
<a href=https://github.com/jonot-cyber>GitHub</a></header><div><main class="flex flex-col gap-8 m-8"><article class="p-8 shadow-lg bg-white"><h2 class="font-bold text-5xl mb-8">Running Android</h2><span class=prose><p><strong>WARNING:</strong> This blog post comes with no warranty. It should be made clear that I do not know any of what I am doing.</p><p>I recently found out that <a href=https://waydro.id>Waydroid</a>, a container-based system to run android apps on Linux, got added to the Fedora repos. I have occasionally tried installing Waydroid with very little success, but this official support from my distro gave me new hope. So I decided to try it out again.</p><p>First of all, I installed the package with <code>sudo dnf install waydroid</code>. I decided to use the <a href=https://wiki.archlinux.org/title/Waydroid>Arch Wiki page</a> for advice. It gave the following commands:</p><p><img src=images/archwiki.png alt="Arch Wiki Screenshot. Text: Afterwards init Waydroid, this will automatically download the latest Android image if it is not yet available. &amp;ldquo;# waydroid init&amp;rdquo; to init with GApps support: &amp;ldquo;# waydroid init -s GAPPS -f&amp;rdquo;"></p><p>Out of those two, you probably want the ones with GApps support. A lot of Android apps require google services. When I ran that command, I got the following output:</p><pre tabindex=0><code>[19:01:27] ERROR: Failed to get system OTA channel: /lineage/waydroid_x86_64/GAPPS.json, error: -1
[19:01:27] See also: &lt;https://github.com/waydroid&gt;
Run &#39;waydroid log&#39; for details.
</code></pre><p>It can&rsquo;t find an image? Hmm. Well time to start looking for clues. The <a href="https://duckduckgo.com/?t=ffab&amp;q=Failed+to+get+system+OTA+channel%3A+%2Flineage%2Fwaydroid_x86_64%2FVANILLA.json%2C+error%3A+-1&amp;ia=web">first three search results</a> didn&rsquo;t look directly related to my issue, so I moved on from that pretty quick. If there is something you should know about me, it&rsquo;s that I am lazy.</p><p>So here are the clues that actually got me to the solution.</p><h2 id=fedora-copr>Fedora Copr</h2><p>Fedora Copr is basically like Arch&rsquo;s AUR but with awful search. Before Waydroid was in the normal repos, this is where you would install Waydroid. It is also where I tried and failed to install it. I noticed this paragraph:</p><p><img src=images/fedoracopr.png alt="Fedora COPR Screenshot. Text: You&amp;rsquo;ll be asked to initialize waydroid with some android images. Paste the following links: System OTA: &amp;ldquo;https://ota.waydro.id/system&amp;rdquo; Vendor OTA: &amp;ldquo;https://ota.waydro.id/vendor&amp;rdquo;"></p><p>system, OTA, waydroid, that&rsquo;s enough words in common to think that this could be relevant!</p><h2 id=github>GitHub</h2><p>One of the repositories in the Waydroid organization is named <a href=https://github.com/waydroid/OTA>OTA</a>. There&rsquo;s that word again! (acronym? intialism? whatever)</p><p>Anyways I saw a path that was interesting in here: <code>system/lineage/waydroid_x86_64/GAPPS.json</code>. That looks like what the program was looking for!</p><p>I also noticed the file <code>CNAME</code>. From experience with my own website, this is telling a github pages project to use a custom domain name. And what do we see in here? <code>ota.waydro.id</code></p><h2 id=solving-the-issue>Solving the issue</h2><p>I think it&rsquo;s safe to say that the error message, that note in the COPR repo, and the github repository are all referring to the same thing. But how do I put this information together?</p><p>Well, in the comments of that Fedora COPR page, I saw this:</p><p><img src=images/comment.png alt="Extremely Helpful Comment. Text: Just tried it, and ran &amp;ldquo;sudo waydroid init -c https://raw.githubusercontent.com/aleasto/waydroid-ota/main/system -v https://raw.githubusercontent.com/aleasto/waydroid-ota/main/vendor"></p><p>Both of those links (<a href=https://raw.githubusercontent.com/aleasto/waydroid-ota/main/system>1</a> and <a href=https://raw.githubusercontent.com/aleasto/waydroid-ota/main/vendor>2</a>) are dead now, but that still gives me useful information. I can use the <code>-c</code> and <code>-v</code> flags to give a custom URL to find the files at.</p><p>Putting this all together, I came up with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Nicely formatted for your reading pleasure</span>
</span></span><span style=display:flex><span>sudo waydroid init <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -s GAPPS <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -f <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -c https://ota.waydro.id/system <span style=color:#ae81ff>\ </span>
</span></span><span style=display:flex><span>  -v https://ota.waydro.id/vendor
</span></span></code></pre></div><p>After entering my password, it started downloading the image. Once it was done, I continued following the arch wiki, and enabled the <code>waydroid-container</code> service with <code>systemctl enable --now waydroid-container.service</code> And everything just worked. Except for:</p><h2 id=this-device-isnt-play-protect-certified>This device isn&rsquo;t Play Protect certified</h2><p>While testing if it worked, I was getting a notification every 5 seconds or so saying this. From what I can tell (and that is very little) Google has a program where they certify devices to be secure or not, and since this is a container, it hasn&rsquo;t been secured. As far as I could tell, this didn&rsquo;t stop anything from working, and you could disable this notification. If this actually means something important please let me know.</p></span></article></main></div></body></html>